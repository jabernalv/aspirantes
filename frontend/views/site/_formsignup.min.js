var abreviaturasidentificacion=$abreviaturasidentificacion,urlsms="$urlsms",_formsignup=$("#form-signup"),celular="",correo_electronico="",identificacion="",correo_electronicovalido="",celularvalido="",identificacionvalida="",todovalidado=!1,celularvalidado=!1,correo_electronicovalidado=!1,identificacionvalidada=!1,contentCargados=[!0];function validacion(){celularvalidado=null!=$("#signupform-celular").val().match(/^[3]\d{9}$/g),correo_electronicovalidado=null!=$("#signupform-correo_electronico").val().match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i)&&$("#signupform-correo_electronico").val()===$("#signupform-repite_correo_electronico").val(),identificacionvalidada=null!=$("#signupform-identificacion").val().match(/^((\d{8})|(\d{10})|(\d{11}))$/g),$("#signupform-celular").val()==celularvalido&&$("#signupform-identificacion").val()==identificacionvalida&&$("#signupform-correo_electronico").val()==correo_electronicovalido?(celular=$("#signupform-celular").val(),identificacion=$("#signupform-identificacion").val(),correo_electronico=$("#signupform-correo_electronico").val(),tokenobtenido=!0,listocelular()):((todovalidado=celularvalidado&&correo_electronicovalidado&&identificacionvalidada)&&setMessage("Dé clic en el botón [TOKEN] para recibir el token en su celular.","info"),$("#obtener-token-button").prop("disabled",!todovalidado),$("#signupform-token").val(""),$("#signupform-token").attr("placeholder","Dé clic en el botón [TOKEN] para recibir el token en su celular."),tokenobtenido=!1)}function listocelular(){celularvalido=celular,correo_electronicovalido=correo_electronico,identificacionvalida=identificacion,$("#signupform-token").attr("placeholder","Dé clic en el botón [TOKEN] para recibir el token en su celular."),$("#signupform-token").focus()}function setMessage(i,e){camarahabilitada?""==i?$("#message-signup").html(""):$("#message-signup").html("<div class='alert-"+e+" alert alert-dismissible' role='alert'>"+i+"</div>"):$("#message-signup").html(messagecamara)}$(".setup-content").each(function(i,e){i>0&&contentCargados.push(!1),$(this).data("index",i)}),$("#signup-button").on("click",function(i){ $("#signupform-foto").val(foto64)}),$("#foto-button").on("focusout",function(i){_formsignup.yiiActiveForm("validateAttribute","signupform-foto")}),$("#signupform-captcha-image").trigger("click"),$("#documentoidentificacion-button").on("click",function(i){return $("#signupform-documentoidentificacion").click(),!1}),$("#documentoidentificacion-button").on("focusout",function(i){_formsignup.yiiActiveForm("validateAttribute","signupform-documentoidentificacion")}),$("#obtener-token-button").on("focusout",function(i){ $("#signupform-token").is("[readonly]")||$("#signupform-token").focus()}),$("#signupform-documentoidentificacion").on("change",function(i){var e=$("#canvaspdf").get(0),o=$(this).get(0).files[0],t=new FileReader,n=window["pdfjs-dist/build/pdf"],a=e.getContext("2d"),r=URL.createObjectURL(o);a.clearRect(0,0,canvas.width,canvas.height),e.height=0,e.width=0,$("#signupform-pdf_correcto").val(0),"application/pdf"==o.type?(t.onload=function(){n.GlobalWorkerOptions.workerSrc="//mozilla.github.io/pdf.js/build/pdf.worker.js";var i=new Uint8Array(this.result);n.getDocument(i).promise.then(function(i){i.getPage(i.numPages).then(function(i){var o=i.getViewport({scale:1,rotate:0});e.height=o.height,e.width=o.width,i.render({canvasContext:a,viewport:o}),$("#signupform-pdf_correcto").val(1),$("#viewerpdfconfirm").attr("src",r),$("#errorpdf").html(""),_formsignup.yiiActiveForm("validateAttribute","signupform-documentoidentificacion")})},function(i){console.error(i),$("#errorpdf").html("<div class='alert-danger alert alert-dismissible' role='alert'>Debe cargar un pdf legible.</div>"),$("#viewerpdfconfirm").attr("src",""),setMessage("El pdf que intenta cargar no tiene el formato correcto, está dañado o tiene contraseña. Debe usar otro archivo.","danger")})},t.readAsArrayBuffer(o),_formsignup.yiiActiveForm("validateAttribute","signupform-pdf_correcto")):console.error(o.name," no es un archivo pdf.")}),$("#signupform-tipo_identificacion_id").parent().find(".select2").on("focusout",function(i){setMessage("",""),$("#span_tipodocumentoidentificacion").html(abreviaturasidentificacion[$("#signupform-tipo_identificacion_id").val()])}),$(".nocopypaste").on("paste",function(i){i.preventDefault()}),$(".nocopypaste").on("copy",function(i){i.preventDefault()}),$(".nocopypaste").on("cut",function(i){i.preventDefault()}),$(".nocopypaste").on("select",function(){this.selectionStart=this.selectionEnd}),$(".triminput").on("focusout",function(i){setMessage("",""),$(this).val($.trim($(this).val()))}),$("#signupform-celular,#signupform-identificacion,#signupform-correo_electronico,#signupform-repite_correo_electronico").on("keyup",function(i){""!=$("#signupform-celular").val()&&""!=$("#signupform-identificacion").val()&&""!=$("#signupform-correo_electronico").val()&&validacion()}),$(':input[type="number"]').on("keypress",function(i){var e="keyCode"in(i=i||window.event)?i.keyCode:i.which;(187===e||43===e||101===e||44===e||45===e||46===e||39===e||222===e||$(this).val().length>=$(this).attr("maxlength"))&&i.preventDefault()}),$("#obtener-token-button").on("click",function(i){celular=$("#signupform-celular").val(),identificacion=$("#signupform-identificacion").val(),correo_electronico=$("#signupform-correo_electronico").val(),celular.match(/^[3]\d{9}$/g)?$.ajax({url:urlsms,type:"post",data:{"Token[celular]":celular,"Token[correo_electronico]":correo_electronico,"Token[identificacion]":identificacion},cache:!1,async:!0,success:function(i){tokenobtenido=i.resultado,setMessage(i.message,tokenobtenido?"success":"danger"),tokenobtenido&&listocelular()}}).done(function(){}).fail(function(){}).always(function(){}):$("#signupform-celular").blur()}),$("#signupform-tipo_identificacion_id").parent().find(".select2").prop("id","signupform-tipo_identificacion_select2"),$("#signupform-tipo_identificacion_id").parent().find(".select2").addClass("focus"),$(":input,#signupform-tipo_identificacion_select2").on("focusin",function(i){ $("[data-spanid]").each(function(i,e){var o=$("#"+$(this).data("spanid"));$(this).hasClass("nombresaspirante")?o.html($(this).val().toUpperCase()):$(this).hasClass("correosaspirante")?o.html($(this).val().toLowerCase()):o.html($(this).val())}),$(".helpli").removeClass("alert alert-info"),$(".helpli").addClass("noshow");var e="#help-for-"+$(this).attr("id");$(e).length>0&&($(e).addClass("alert alert-info"),$(e).removeClass("noshow"))});var navListItems=$("div.setup-panel div a"),allWells=$(".setup-content"),_data=_formsignup.data("yiiActiveForm");allWells.hide(),navListItems.on("click",function(i){i.preventDefault();var e=$($(this).attr("href")),o=$(this);o.hasClass("disabled")||(navListItems.removeClass("btn-primary").addClass("btn-default"),o.addClass("btn-primary"),allWells.hide(),e.show(),_focus=e.find(".focus"),_focus.is("select")?$("#"+_focus.prop("id")).select2("open").select2("close").select2("open"):_focus.focus())}),$(".nextBtn").click(function(){ $.each(_formsignup.data("yiiActiveForm").attributes,function(){ $("#"+this.id).closest(".form-group").hasClass("has-error")||(this.status=3)}),_formsignup.yiiActiveForm("validate");var i=$(this).closest(".setup-content"),e=i.attr("id"),o=$('div.setup-panel div a[href="#'+e+'"]'),t=$('div.setup-panel div a[href="#'+e+'"]').parent().next(),n=t.children("a"),a=i.find(":input"),r=!0;a.each(function(i,e){if($(this).closest(".form-group").hasClass("has-error"))return r=!1,!1}),r&&(o.addClass("btn-success"),t.removeClass("disabled"),n.removeClass("disabled").trigger("click"))}),$(".prevBtn").click(function(){var i=$(this).closest(".setup-content"),e=i.attr("id"),o=$('div.setup-panel div a[href="#'+e+'"]').parent().prev().children("a");i.find("input[type='text'],input[type='email'],input[type='password'],input[type='url']");o.trigger("click")}),$("div.setup-panel div a.btn-primary").trigger("click");